{
    "name": "4-Tank Conditional Loop",
    "network": {
        "components": [
            {
                "id": "tank_1",
                "type": "tank",
                "shape": "cylindrical",
                "radius": 1,
                "maxLevel": 10,
                "waterLevel": 9,
                "temperature": 18,
                "ph": 7.1,
                "o2": 8.5,
                "bodn": 1.2,
                "nitrate": 0.6,
                "co2": 4.5,
                "position": {
                    "x": 10,
                    "y": 0,
                    "z": 0
                }
            },
            {
                "id": "pump_1",
                "type": "pump",
                "maxFlowRate": 0.5,
                "power": 0,
                "temperature": 15,
                "ph": 7.2,
                "o2": 9,
                "position": {
                    "x": 7,
                    "y": 7,
                    "z": 0
                }
            },
            {
                "id": "tank_2",
                "type": "tank",
                "shape": "cylindrical",
                "radius": 1,
                "maxLevel": 10,
                "waterLevel": 0,
                "temperature": 18,
                "ph": 7.1,
                "o2": 8.5,
                "bodn": 1.2,
                "nitrate": 0.6,
                "co2": 4.5,
                "position": {
                    "x": 0,
                    "y": 10,
                    "z": 0
                }
            },
            {
                "id": "pump_2",
                "type": "pump",
                "maxFlowRate": 0.5,
                "power": 0,
                "temperature": 15,
                "ph": 7.2,
                "o2": 9,
                "position": {
                    "x": -7,
                    "y": 7,
                    "z": 0
                }
            },
            {
                "id": "tank_3",
                "type": "tank",
                "shape": "cylindrical",
                "radius": 1,
                "maxLevel": 10,
                "waterLevel": 9,
                "temperature": 18,
                "ph": 7.1,
                "o2": 8.5,
                "bodn": 1.2,
                "nitrate": 0.6,
                "co2": 4.5,
                "position": {
                    "x": -10,
                    "y": 0,
                    "z": 0
                }
            },
            {
                "id": "pump_3",
                "type": "pump",
                "maxFlowRate": 0.5,
                "power": 0,
                "temperature": 15,
                "ph": 7.2,
                "o2": 9,
                "position": {
                    "x": -7,
                    "y": -7,
                    "z": 0
                }
            },
            {
                "id": "tank_4",
                "type": "tank",
                "shape": "cylindrical",
                "radius": 1,
                "maxLevel": 10,
                "waterLevel": 0,
                "temperature": 18,
                "ph": 7.1,
                "o2": 8.5,
                "bodn": 1.2,
                "nitrate": 0.6,
                "co2": 4.5,
                "position": {
                    "x": 0,
                    "y": -10,
                    "z": 0
                }
            },
            {
                "id": "pump_4",
                "type": "pump",
                "maxFlowRate": 0.5,
                "power": 0,
                "temperature": 15,
                "ph": 7.2,
                "o2": 9,
                "position": {
                    "x": 7,
                    "y": -7,
                    "z": 0
                }
            }
        ],
        "pipes": [
            {
                "id": "pipe_1",
                "from": "tank_1",
                "to": "pump_1"
            },
            {
                "id": "pipe_2",
                "from": "pump_1",
                "to": "tank_2"
            },
            {
                "id": "pipe_3",
                "from": "tank_2",
                "to": "pump_2"
            },
            {
                "id": "pipe_4",
                "from": "pump_2",
                "to": "tank_3"
            },
            {
                "id": "pipe_5",
                "from": "tank_3",
                "to": "pump_3"
            },
            {
                "id": "pipe_6",
                "from": "pump_3",
                "to": "tank_4"
            },
            {
                "id": "pipe_7",
                "from": "tank_4",
                "to": "pump_4"
            },
            {
                "id": "pipe_8",
                "from": "pump_4",
                "to": "tank_1"
            }
        ]
    },
    "controlActions": [
        {
            "time": 0,
            "componentId": "pump_1",
            "actionType": "set_pump_power",
            "params": {
                "power": "100"
            }
        }
    ],
    "conditionalActions": [
        {
            "source": {
                "componentId": "tank_1",
                "value": "waterLevel"
            },
            "condition": {
                "operator": ">",
                "threshold": 0.5
            },
            "target": {
                "componentId": "pump_1",
                "actionType": "set_pump_power",
                "params": {
                    "power": "100"
                }
            }
        },
        {
            "source": {
                "componentId": "tank_2",
                "value": "waterLevel"
            },
            "condition": {
                "operator": ">",
                "threshold": 0.8
            },
            "target": {
                "componentId": "pump_1",
                "actionType": "set_pump_power",
                "params": {
                    "power": "0"
                }
            }
        },
        {
            "source": {
                "componentId": "tank_2",
                "value": "waterLevel"
            },
            "condition": {
                "operator": ">",
                "threshold": 0.2
            },
            "target": {
                "componentId": "pump_2",
                "actionType": "set_pump_power",
                "params": {
                    "power": "100"
                }
            }
        },
        {
            "source": {
                "componentId": "tank_3",
                "value": "waterLevel"
            },
            "condition": {
                "operator": ">",
                "threshold": 0.8
            },
            "target": {
                "componentId": "pump_2",
                "actionType": "set_pump_power",
                "params": {
                    "power": "0"
                }
            }
        },
        {
            "source": {
                "componentId": "tank_3",
                "value": "waterLevel"
            },
            "condition": {
                "operator": ">",
                "threshold": 0.2
            },
            "target": {
                "componentId": "pump_3",
                "actionType": "set_pump_power",
                "params": {
                    "power": "100"
                }
            }
        },
        {
            "source": {
                "componentId": "tank_4",
                "value": "waterLevel"
            },
            "condition": {
                "operator": ">",
                "threshold": 0.8
            },
            "target": {
                "componentId": "pump_3",
                "actionType": "set_pump_power",
                "params": {
                    "power": "0"
                }
            }
        },
        {
            "source": {
                "componentId": "tank_4",
                "value": "waterLevel"
            },
            "condition": {
                "operator": ">",
                "threshold": 0.2
            },
            "target": {
                "componentId": "pump_4",
                "actionType": "set_pump_power",
                "params": {
                    "power": "100"
                }
            }
        },
        {
            "source": {
                "componentId": "tank_1",
                "value": "waterLevel"
            },
            "condition": {
                "operator": ">",
                "threshold": 0.8
            },
            "target": {
                "componentId": "pump_4",
                "actionType": "set_pump_power",
                "params": {
                    "power": "0"
                }
            }
        },
        {
            "source": {
                "componentId": "tank_1",
                "value": "waterLevel"
            },
            "condition": {
                "operator": "<",
                "threshold": 0.1
            },
            "target": {
                "componentId": "pump_1",
                "actionType": "emergency_stop",
                "params": {}
            }
        },
        {
            "source": {
                "componentId": "tank_2",
                "value": "waterLevel"
            },
            "condition": {
                "operator": "<",
                "threshold": 0.1
            },
            "target": {
                "componentId": "pump_2",
                "actionType": "emergency_stop",
                "params": {}
            }
        },
        {
            "source": {
                "componentId": "tank_3",
                "value": "waterLevel"
            },
            "condition": {
                "operator": "<",
                "threshold": 0.1
            },
            "target": {
                "componentId": "pump_3",
                "actionType": "emergency_stop",
                "params": {}
            }
        },
        {
            "source": {
                "componentId": "tank_4",
                "value": "waterLevel"
            },
            "condition": {
                "operator": "<",
                "threshold": 0.1
            },
            "target": {
                "componentId": "pump_4",
                "actionType": "emergency_stop",
                "params": {}
            }
        }
    ],
    "attackScenarios": [
        {
            "time": 300,
            "type": "chemical_dosing",
            "componentId": "tank_1",
            "chemicalType": "acid"
        },
        {
            "time": 600,
            "type": "chemical_interference",
            "componentId": "tank_2",
            "chemical": "BODn",
            "amount": 5
        },
        {
            "time": 450,
            "type": "physical_damage",
            "componentId": "pump_3",
            "damageType": "pump_failure"
        }
    ],
    "simulationSettings": {
        "duration": 900,
        "ambientTemp": 20
    }
}